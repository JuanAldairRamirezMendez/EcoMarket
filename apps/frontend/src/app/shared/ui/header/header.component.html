<header class="sticky top-0 z-40 border-b border-border bg-card/90 backdrop-blur supports-[backdrop-filter]:bg-card/60">
  <div class="max-w-6xl mx-auto px-4 h-14 flex items-center gap-4">
    <a routerLink="/" class="text-xl font-semibold text-foreground">EcoMarket</a>

    <form class="flex-1 hidden md:flex items-center" (submit)="onSearch($event)">
      <input [(ngModel)]="query" name="q" class="w-full px-3 py-2 rounded-l-lg bg-input-background text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Buscar productos, categorías…" />
      <button class="px-4 py-2 rounded-r-lg bg-primary text-foreground border border-border hover:opacity-90">Buscar</button>
    </form>

    <nav class="ml-auto flex items-center gap-3">
      <button class="md:hidden px-2 py-1.5 rounded border border-border" (click)="showSearch=true">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="11" cy="11" r="7"/><path d="m21 21-4.3-4.3"/></svg>
      </button>
      <a routerLink="/cart" class="relative inline-flex items-center gap-2 px-3 py-1.5 rounded border border-border">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M6 6h15l-1.5 9h-12z"/><circle cx="9" cy="20" r="1"/><circle cx="18" cy="20" r="1"/></svg>
        <span class="hidden sm:inline">Carrito</span>
        <span class="absolute -top-1 -right-1 text-[10px] leading-none px-1.5 py-0.5 rounded-full bg-primary text-foreground border border-border">2</span>
      </a>
      <a routerLink="/profile" class="inline-flex items-center gap-2 px-3 py-1.5 rounded border border-border">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="8" r="4"/><path d="M6 20c0-3.314 2.686-6 6-6s6 2.686 6 6"/></svg>
        <span class="hidden sm:inline">Perfil</span>
      </a>
    </nav>
  </div>

  <!-- Overlay de búsqueda en móvil -->
  <div *ngIf="showSearch" class="fixed inset-0 z-50 bg-black/40">
    <div class="absolute left-1/2 -translate-x-1/2 top-6 w-[92%] max-w-xl bg-card border border-border rounded-lg shadow-lg p-2">
      <form class="flex items-center" (submit)="onSearch($event)">
        <input [(ngModel)]="query" name="q_m" class="flex-1 px-3 py-2 rounded-l-lg bg-input-background text-foreground border border-border focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Buscar productos, categorías…" />
        <button class="px-4 py-2 rounded-r-lg bg-primary text-foreground border border-border hover:opacity-90">Buscar</button>
      </form>
      <button class="mt-2 w-full px-3 py-1.5 rounded border border-border" (click)="showSearch=false">Cerrar</button>
    </div>
  </div>
</header>
